import{_ as g,o as r,c,d as t,F as _,f as p,g as m,t as i,h as C,v as b}from"./index-4c9ff146.js";const{VITE_APP_URL:h,VITE_APP_PATH:u}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"yuna1002",BASE_URL:"/vueWeek6Hw/",MODE:"production",DEV:!1,PROD:!0},y={data(){return{cart:{},loadingItem:""}},methods:{getCarts(){this.$http.get(`${h}/api/${u}/cart`).then(e=>{this.cart=e.data.data}).catch(e=>{alert(e.data.message)})},updateQty(e){const s={product_id:e.product.id,qty:e.qty};this.$http.put(`${h}/api/${u}/cart/${e.id}`,{data:s}).then(d=>{alert(d.data.message),this.getCarts(),this.loadingItem=""}).catch(d=>{alert(d.data.message)})},delCart(e){this.loadingItem=e,this.$http.delete(`${h}/api/${u}/cart/${e}`).then(s=>{alert(s.data.message),this.getCarts(),this.loadingItem=""}).catch(s=>{alert(s.data.message)})},delAllCart(){this.$http.delete(`${h}/api/${u}/carts`).then(e=>{alert(e.data.message),this.getCarts()}).catch(e=>{alert(e.data.message)})}},mounted(){this.getCarts()}},v=t("h2",null,"購物車",-1),P={class:"text-end"},$={class:"table align-middle"},f=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價")])],-1),x=["onClick","disabled"],A={class:"input-group input-group-sm"},V=["onUpdate:modelValue","onChange","disabled"],k=["value"],E={class:"text-end"},I=t("td",{colspan:"3",class:"text-end"},"總計",-1),T={class:"text-end"};function D(e,s,d,U,n,o){return r(),c(_,null,[v,t("div",P,[t("button",{class:"btn btn-outline-danger",type:"button",onClick:s[0]||(s[0]=(...a)=>o.delAllCart&&o.delAllCart(...a))}," 清空購物車 ")]),t("table",$,[f,t("tbody",null,[n.cart.carts?(r(!0),c(_,{key:0},p(n.cart.carts,a=>(r(),c("tr",{key:a.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:l=>o.delCart(a.id),disabled:n.loadingItem===a.id}," x ",8,x)]),t("td",null,i(a.product.title),1),t("td",null,[t("div",A,[C(t("select",{name:"",id:"",class:"form-control","onUpdate:modelValue":l=>a.qty=l,onChange:l=>o.updateQty(a),disabled:n.loadingItem===a.id},[(r(),c(_,null,p(20,l=>t("option",{value:l,key:l},i(l),9,k)),64))],40,V),[[b,a.qty]])])]),t("td",E,i(a.total),1)]))),128)):m("",!0)]),t("tfoot",null,[t("tr",null,[I,t("td",T,i(n.cart.total),1)])])])],64)}const w=g(y,[["render",D]]);export{w as default};
